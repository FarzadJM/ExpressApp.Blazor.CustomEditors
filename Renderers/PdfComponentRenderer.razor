@using ExpressApp.Blazor.Server.CustomEditors.Models;

<object data="@pdfContent" style="width:100%; min-height: 350px; height: 100%;"></object>

@code {
    private string? pdfContent;

    [Parameter]
    public PdfComponentModel? ComponentModel { get; set; }

    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            base.OnInitialized();
        }

        {
            if (ComponentModel?.Value is null || ComponentModel.Value.Length <= 0)
            {
                pdfContent = string.Empty;
            }
            else
            {
                pdfContent = "data:application/pdf;base64,";
                pdfContent += System.Convert.ToBase64String(ComponentModel.Value);
            }

            StateHasChanged();
        }
    }

    public static RenderFragment Create(PdfComponentModel componentModel) => @<PdfComponentRenderer ComponentModel=@componentModel />;
}